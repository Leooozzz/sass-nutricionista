generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}
enum AppointmentStatus {
  PENDING
  CONFIRMED
  CANCELED
  DONE
}

model User {
  id       Int    @id @default(autoincrement())
  name     String
  email    String @unique
  password String
  role     Role   @default(CLIENT)

  appointments  Appointment[]  @relation("ClientAppointments")
  nutricionista Nutricionista?
}

model Nutricionista {
  id            Int    @id @default(autoincrement())
  name          String
  userId        Int    @unique
  crm           String
  especialidade String

  user         User          @relation(fields: [userId], references: [id])
  appointments Appointment[] @relation("NutricionistaAppointments")
}

model Appointment {
  id              Int      @id @default(autoincrement())
  date            DateTime @default(now())
  hour            DateTime @default(now())
  status          AppointmentStatus  @default(PENDING)
  clientId        Int
  nutricionistaId Int

  client        User          @relation("ClientAppointments", fields: [clientId], references: [id])
  nutricionista Nutricionista @relation("NutricionistaAppointments", fields: [nutricionistaId], references: [id])
}

enum Role {
  CLIENT
}
